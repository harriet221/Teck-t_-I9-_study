# Deadlock

## 상태
- 프로세스1과 프로세스2가 있다고 가정
- 프로세스1은 a 자원을 수행, 프로세스2는 b 자원을 수행
- 그리고 프로세스1은 b자원을 원하고 프로세스2는 b자원을 동시에 원하는 상황
- 서로의 자원을 기다릴 때 무한정 대기 상태에 빠지는 것이 DeadLock

- ![image](https://github.com/harriet221/Teckit_I9_study/assets/148305892/83bd6a08-3608-4a31-a6f2-d14139d19355)

## Deadlock 필수 조건 4가지 (상점비환형)
- 상호 배제
  --> 자원은 한 프로세스당 하나만 사용할 수 있다.

- 점유 대기
  --> 최소한 하나의 자원을 점유하고 있으면서 다른 프로세스에 할당되어 사용하고 있는 자원을 추가로 점유하기 위해 대기하는 프로세스가 존재해야 함

- 비선점
  --> 다른 프로세스가 가지고 있는 자원을 함부로 뺏을 수 없음

- 환형 대기
  --> 프로세스 집합에서 순환 형태로 자원을 기다려야 함
 ![image](https://github.com/harriet221/Teckit_I9_study/assets/148305892/2d1b4425-043b-4582-b9a5-488aca921182)
 ![image](https://github.com/harriet221/Teckit_I9_study/assets/148305892/30e72939-0aa0-44e1-9285-9c2070c76ff6)



## DeadLock 예방
- 예방 기법
  --> 교착 상태 발생 조건 중 하나를 해결하면서 제거
  --> 자원 낭비가 굉장히 심함
  >상호배제 부정 : 여러 프로세스가 공유 자원 사용
  
  >점유대기 부정 : 프로세스 실행전 모든 자원을 할당
  
  >비선점 부정 : 자원 점유 중인 프로세스가 다른 자원을 요구할 때 가진 자원 반납
  
  >순환대기 부정 : 자원에 고유번호 할당 후 순서대로 자원 요구

- 회피 기법
  --> 교착 상태가 발생하면 피하는 기법
  >은행원 알고리즘(Banker's Algorithm)
 > 은행에서 모든 고객의 요구가 충족되도록 현금을 할당하는데서 유래함 프로세스가 자원을 요구할 때, 시스템은 자원을 할당한 후에도 안정 상태로 남아있게 되는지 사전에 검사하여 교착 상태 회피안정 상태면 자원 할당, 아니면 다른 프로세스들이 자원 해지까지 대기

 - 발견 기법
  
    --> 자원 할당 그래프를 통해 교착 상태를 탐지함

    --> 자원 요청 시, 탐지 알고리즘을 실행시켜 그에 대한 오버헤드 발생함

  - 회복 기법
   
    --> 교착 상태를 일으킨 프로세스를 회복하는 기법

    >프로세스 종료 방법
    
> 교착 상태의 프로세스를 모두 중지, 교착 상태가 제거될 때까지 하나씩 프로세스 중지
> 자원 선점 방법
교착 상태의 프로세스가 점유하고 있는 자원을 선점해 다른 프로세스에게 할당 (해당 프로세스 일시정지 시킴), 우선 순위가 낮은 프로세스나 수행 횟수 적은 프로세스 위주로 프로세스 자원 선점
