HTTP 프로토콜은 Connectionless, Stateless한 특성을 가지기 때문에 서버는 클라이언트가 누구인지 매번 확인해야 한다.

이를 보완하기 위해 쿠키와 세션을 사용한다.

# 쿠키(Cookie)

- 클라이언트 로컬에 저장되는 키와 값이 들어있는 작은 데이터 파일
- 사용자 인증이 유효한 시간을 명시할 수 있으며, 유효 시간이 정해지면 브라우저가 종료되어도 인증이 유지된다.
- 사용자가 따로 요청하지 않아도 브라우저가 Request 할 때 Request Header에 넣어서 자동으로 서버에 전송한다.

## 동작 방식

1. 클라이언트가 페이지를 요청하면
2. 서버에서 쿠키를 생성한 뒤
3. HTTP 헤더에 쿠키를 포함시켜서 응답한다.
4. 브라우저가 종료되어도 쿠키 유효 시간이 남아있으면 클라이언트에서 보관한다.
5. 같은 요청이 들어올 경우 HTTP 헤더에 쿠키를 포함시켜서 전송한다.
6. 서버에서 쿠키를 읽고 이전 상태에서 정보를 변경할 필요가 있으면 쿠키를 업데이트하고 변경된 쿠키를 다시 HTTP 헤더에 포함시켜서 응답한다.

</br>

# 세션(Session)

- 쿠키를 기반으로 하지만, 사용자 정보 파일을 서버 측에서 관리한다.
- 서버에서 클라이언트를 구분하기 위해 세션 ID를 부여하고, 이 세션 ID는 쿠키에 저장된다.
- 브라우저를 종료할 때까지 인증상태가 유지된다. 혹은 일정 시간 동안 응답이 없으면 정보가 유지되지 않게 설정도 가능하다.
- 서버에서 정보를 관리하기 때문에 쿠키보다 보안에 좋지만, 동접자가 많은 웹사이트의 경우에는 서버 과부하로 성능이 저하될 수 있다.

## 동작 방식

1. 클라이언트가 서버에 접속할 때 세션 ID를 발급받는다.
2. 클라이언트는 세션 ID에 대해 쿠키를 사용해서 저장한다.
3. 클라이언트가 서버에 요청할 때, 쿠키의 세션 ID를 서버에 같이 전달하고
4. 서버는 세션 ID를 받아서 그 ID로 클라이언트의 정보를 가져와서
5. 요청을 처리하여 클라이언트에게 응답한다.

</br>

# 쿠키와 세션의 차이

- 쿠키는 정보를 브라우저의 로컬에 저장하지만, 세션은 서버에 저장한다.
- 세션은 서버의 처리가 필요하기 때문에 속도가 쿠키보다 느리다.
- 쿠키는 클라이언트 로컬에 저장되기 때문에 변질되거나 요청 과정에서 스니핑 당할 우려가 있어서 보안에 취약하지만, 세션은 세션 ID만 쿠키로 저장하고 정보는 서버에서 처리하기 때문에 비교적 보안성이 좋다.
- 쿠키는 브라우저를 종료해도 정보가 계속 남아있을 수 있지만, 세션은 브라우저가 종료되면 만료 시간에 상관없이 삭제된다.

## 사용 예

### 쿠키

- 사이트 로그인 시, “아이디/비밀번호를 저장하시겠습니까?”
- 쇼핑몰 장바구니 기능

### 세션

- 로그인 같은 보안상 중요한 작업
